title: Welcome to uBlue
properties:
  mode: "run-on-change"
screens:
  first-screen:
    source: yafti.screen.title
    values:
      title: "Welcome to Zeliblue (Alpha)"
      icon: "/path/to/icon"
      description: |
        Pick some apps to get started.
  can-we-modify-your-flatpaks:
    source: yafti.screen.consent
    values:
      title: Set Up Flathub
      condition:
        run: flatpak remotes --columns=name | grep fedora
      description: |
        Set up Flathub. This is the source of apps installed in later steps, and the primary source of apps installed via Software.
      actions:
        - run: flatpak remote-delete --system --force fedora
        - run: flatpak remote-delete --user --force fedora
        - run: flatpak remove --system --noninteractive --all
        - run: flatpak remote-add --if-not-exists --system flathub https://flathub.org/repo/flathub.flatpakrepo
        - run: flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo
  check-system-flathub:
    source: yafti.screen.consent
    values:
      title: Missing Flathub Repository (System)
      condition:
        run: flatpak remotes --system --columns=name | grep flathub | wc -l | grep '^0$'
      description: |
        Set up Flathub on the system.
      actions:
        - run: flatpak remote-add --if-not-exists --system flathub https://flathub.org/repo/flathub.flatpakrepo
  check-user-flathub:
    source: yafti.screen.consent
    values:
      title: Missing Flathub Repository (User)
      condition:
        run: flatpak remotes --user --columns=name | grep flathub | wc -l | grep '^0$'
      description: |
        Set up Flathub for the current user.
      actions:
        - run: flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo
  applications:
    source: yafti.screen.package
    values:
      title: App Installation
      show_terminal: true
      package_manager: yafti.plugin.flatpak
      groups:
        Core:
          description: Core apps for the GNOME desktop environment.
          default: true
          packages:
            - Calculator:
                package: org.gnome.Calculator
                system: true
                user: false
            - Calendar:
                package: org.gnome.Calendar
                system: true
                user: false
            - Celluloid (Media Player):
                package: io.github.celluloid_player.Celluloid
                system: true
                user: false
            - Characters:
                package: org.gnome.Characters
                system: true
                user: false
            - Clocks:
                package: org.gnome.clocks
                system: true
                user: false
            - Contacts:
                package: org.gnome.Contacts
                system: true
                user: false
            - Disk Usage Analyzer:
                package: org.gnome.baobab
                system: true
                user: false
            - Document Scanner:
                package: org.gnome.SimpleScan
                system: true
                user: false
            - Document Viewer:
                package: org.gnome.Evince
                system: true
                user: false
            - Extensions Manager:
                package: com.mattjakeman.ExtensionManager
                system: true
                user: false
            - Font Viewer:
                package: org.gnome.font-viewer
                system: true
                user: false
            - Image Viewer:
                package: org.gnome.Loupe
                system: true
                user: false
            - Logs:
                package: org.gnome.Logs
                system: true
                user: false
            - Maps:
                package: org.gnome.Maps
                system: true
                user: false
            - Text Editor:
                package: org.gnome.TextEditor
                system: true
                user: false
            - Weather:
                package: org.gnome.Weather
                system: true
                user: false
            - Web:
                package: org.gnome.Epiphany
                system: true
                user: false
        System Apps:
          description: System applications for all desktop environments.
          default: true
          packages:
            - Fedora Media Writer:
                package: org.fedoraproject.MediaWriter
                system: true
                user: false
            - Flatseal (Permission Manager):
                package: com.github.tchx84.Flatseal
                system: true
                user: false
            - Pika Backup:
                package: org.gnome.World.PikaBackup
                system: true
                user: false
        Web Browsers:
          description: Additional browsers to complement or replace the default.
          default: false
          packages:
            - Chromium: org.chromium.Chromium
            - Google Chrome: com.google.Chrome
            - Microsoft Edge: com.microsoft.Edge
            - Mozilla Firefox: org.mozilla.firefox
            - Opera: com.opera.Opera
        Gaming:
          description: "Rock and Stone!"
          default: false
          packages:
            - Discord: com.discordapp.Discord
            - Heroic Games Launcher: com.heroicgameslauncher.hgl
            - Steam: com.valvesoftware.Steam
            - Gamescope (Utility): com.valvesoftware.Steam.Utility.gamescope
            - MangoHUD (Utility): org.freedesktop.Platform.VulkanLayer.MangoHud//22.08
            - SteamTinkerLaunch (Utility): com.valvesoftware.Steam.Utility.steamtinkerlaunch
        Office:
          description: Boost your productivity.
          default: false
          packages:
            - Iotas (Notes): org.gnome.gitlab.cheywood.Iotas
            - LibreOffice: org.libreoffice.LibreOffice
            - List (ToDos): io.github.mrvladus.List
            - OnlyOffice: org.onlyoffice.desktopeditors
            - Standard Notes: org.standardnotes.standardnotes
            - Sticky Notes: com.vixalien.sticky
            - Thunderbird Email: org.mozilla.Thunderbird
        Graphics:
          description: Express yourself.
          default: false
          packages:
            - Darktable: org.darktable.Darktable
            - GIMP: org.gimp.GIMP
            - Inkscape: org.inkscape.Inkscape
            - Krita: org.kde.krita
        Streaming:
          description: Stream to the Internet.
          default: false
          packages:
            - OBS Studio: com.obsproject.Studio
            - Boatswain for Streamdeck: com.feaneron.Boatswain
        Video Production:
          description: Video editing software and related utilities.
          default: false
          packages:
            - Handbrake: fr.handbrake.ghb
            - Kdenlive: org.kde.kdenlive
            - Olive: org.olivevideoeditor.Olive
            - Pitivi: org.pitivi.Pitivi
            - Video Trimmer: org.gnome.gitlab.YaLTeR.VideoTrimmer
        Development:
          description: Development tools.
          default: false
          packages:
            - Black Box (Terminal): com.raggesilver.BlackBox
            - Boxes: org.gnome.Boxes
            - Builder: org.gnome.Builder
            - Visual Studio Code: com.visualstudio.code
            - Codium: com.vscodium.codium
            - Commit (Editor): re.sonny.Commit
            - Dconf Editor: ca.desrt.dconf-editor
            - Playhouse (HTML/CSS/JS): re.sonny.Playhouse
            - Workbench (GTK4/libadwaita): re.sonny.Workbench

  final-screen:
    source: yafti.screen.title
    values:
      title: "All done!"
      icon: "/path/to/icon"
      links:
        - "Install More Apps":
            run: /usr/bin/gnome-software
        - "Website":
            run: /usr/bin/xdg-open https://ublue.it
        - "Join the Discord Community":
            run: /usr/bin/xdg-open https://discord.gg/XjG48C7VHx
      description: |
        Thanks for trying uBlue, we hope you enjoy it!
