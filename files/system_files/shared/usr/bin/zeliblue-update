#!/usr/bin/bash

notify-send "Beginning full system update..." --app-name="Zeliblue Update" -u NORMAL
echo "Beginning full system update..."

bootc upgrade

# Updates system Flatpaks
if flatpak remotes | grep -q system; then
    flatpak update -y
fi

# Update user Flatpaks
if flatpak remotes | grep -q user; then
    flatpak update --user -y
fi

# Guard Brew if the user does not own brew/doesn't exist
if [[ -O /var/home/linuxbrew/.linuxbrew/bin/brew ]]; then
    # Upgrade will run brew update if needed
    /var/home/linuxbrew/.linuxbrew/bin/brew upgrade
fi

notify-send "Full system update completed" --app-name="Zeliblue Update" -u NORMAL
echo "Full system update completed."
